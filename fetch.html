<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        let url = 'http://yuanjin.tech:5005/api/movie?page=1&limit=5';
        let abc = '11'
        let aaa = fetch(url).then(response => response.json())//解析为可读数据 
            .then(data => {
                // 应为前面 response.json() 返回的是一个 promise对象  所以可以在then 走resolve 返回对象
                console.log('1111', data)
                abc = data
                console.log('cc2', abc)
            })//执行结果是 resolve就调用then方法
            .catch(err => console.log("Oh, error", err))//执行结果是 reject就调用catch方法
        console.log('abc', abc)  // 失败  可能有延时吧

        let bbb = {
            async getMovies(page, limit) {
                var url = `http://yuanjin.tech:5005/api/movie?page=${page}&limit=${limit}`;
                var datas = await fetch(url).then(resp => resp.json());
                return datas;
            },
            async get1() {
                let aaa = await this.getMovies(1, 3);
                console.log('ge1', aaa)
            }
        };

        bbb.get1() // 要加了 async  await 后才是可用对象  不然是promise对象
 

    </script>
</body>

</html>